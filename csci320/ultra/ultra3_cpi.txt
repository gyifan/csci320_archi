CSCI 320 - Computer Architecture
Yifan Ge
11/19/2013
Ultra3_cpi.txt

CPI Table:
        Add     4
        BEQ     3
        BLT     3
        BNE     3
        Load    5
        LoadI   3
        LoadD   4
        Store   4 
        StoreD  3 
        Sub     4
        RJump   3
        JumpD   3
        JumpI   2

Average CPI = 4*(31/100)+3*(43/100)+5*(25/100)+(1/100) = 3.79

MIPS = 1/(3.79*100*10^(-9))/10^6 = 2.64

The program code:

MEM[3] = 16'b10; // 2
MEM[4] = 16'b01; // 1
MEM[10] = 16'b0001110000000010; // LOADI R3, 2
MEM[11] = 16'b0000101100000010; // LOAD R2, (2)R3
MEM[12] = 16'b0000010000000011; // LOAD R1, 3
MEM[13] = 16'b1110000110000010; // BNE R1, R2, 2
MEM[14] = 16'b0100010110000000; // ADD R1, R1, R2
MEM[15] = 16'b0010010000000101; // STORE R1, 5
MEM[16] = 16'b0100010010000000; // ADD R1, R0, R2
MEM[17] = 16'b1101000110000010; // BEQ R1, R2, 2
MEM[18] = 16'b1100000000001010; // JUMP 10
MEM[19] = 16'b0010011100000110; // STORE R1, (6)R3
MEM[20] = 16'b0001010000000100; // LOADI R1, 4
MEM[21] = 16'b1111001001000001; // BLT R2, R1, 1
MEM[22] = 16'b1100001100010101; // JUMP (21)R3
MEM[23] = 16'b1100000000011000; // JUMP 24
MEM[24] = 16'b0101011011000000; // SUB R1, R2, R3
MEM[25] = 16'b1100000001110001; // RJUMP -15

Interpretation:
10 -> R3 = 2
11 -> R2 = 1
12 -> R1 = 2
13 -> since R1 != R2, branch to 13+2 = 15
15 -> store R1 -> MEM[5]
16 -> R1 = 0 + R2 = 1
17 -> since R1 = R2 = 1, branch to 17+2 = 19
19 -> store R1 -> MEM[8]
20 -> R1 = 4
21 -> since R1 > R2, branch to 21+1 = 22
22 -> jump to 21+2 = 23
23 -> jump to 24
24 -> R1 = R2 - R3 = -1
25 -> jump to 25 - 15 = 10
Loop ...

Output for 120 clock cycles:


Time	PC	IR	opcode	R0	R1	R2	R3	mof
VCD info: dumpfile ultra3.vcd opened for output.
Decoding at Time                    0; PC=   10: 
0	   11	0001110000000010	0000	    0	    0	    0	    0	0
1	   11	0001110000000010	0001	    0	    0	    0	    0	0
2	   11	0001110000000010	0001	    0	    0	    0	    2	0
Time                    3 LOADI R[3],   2
Decoding at Time                    3; PC=   11: 
3	   12	0000101100000010	0001	    0	    0	    0	    2	0
4	   12	0000101100000010	0000	    0	    0	    0	    2	0
7	   12	0000101100000010	0000	    0	    0	    1	    2	0
Time                    8 LOAD R[2], (  2)R[3]
Decoding at Time                    8; PC=   12: 
8	   13	0000010000000011	0000	    0	    0	    1	    2	0
11	   13	0000010000000011	0000	    0	    2	    1	    2	0
Time                   12 LOAD R[1],   3
Decoding at Time                   12; PC=   13: 
12	   14	1110000110000010	0000	    0	    2	    1	    2	0
13	   14	1110000110000010	1110	    0	    2	    1	    2	0
14	   15	1110000110000010	1110	    0	    2	    1	    2	0
Time                   15 BNE R[1], R[2],   2
Decoding at Time                   15; PC=   15: 
15	   16	0010010000000101	1110	    0	    2	    1	    2	0
16	   16	0010010000000101	0010	    0	    2	    1	    2	0
Time                   18 STORE R[1],   5
Decoding at Time                   18; PC=   16: 
18	   17	0100010010000000	0010	    0	    2	    1	    2	0
19	   17	0100010010000000	0100	    0	    2	    1	    2	0
21	   17	0100010010000000	0100	    0	    1	    1	    2	0
Time                   22 ADD R[1], R[0], R[2]
Decoding at Time                   22; PC=   17: 
22	   18	1101000110000010	0100	    0	    1	    1	    2	0
23	   18	1101000110000010	1101	    0	    1	    1	    2	0
24	   19	1101000110000010	1101	    0	    1	    1	    2	0
Time                   25 BEQ R[1], R[2],   2
Decoding at Time                   25; PC=   19: 
25	   20	0010011100000110	1101	    0	    1	    1	    2	0
26	   20	0010011100000110	0010	    0	    1	    1	    2	0
Time                   29 STORE R[1], (  6)R[3]
Decoding at Time                   29; PC=   20: 
29	   21	0001010000000100	0010	    0	    1	    1	    2	0
30	   21	0001010000000100	0001	    0	    1	    1	    2	0
31	   21	0001010000000100	0001	    0	    4	    1	    2	0
Time                   32 LOADI R[1],   4
Decoding at Time                   32; PC=   21: 
32	   22	1111001001000001	0001	    0	    4	    1	    2	0
33	   22	1111001001000001	1111	    0	    4	    1	    2	0
Time                   35 BLT R[2], R[1],   1
Decoding at Time                   35; PC=   22: 
35	   23	1100001100010101	1111	    0	    4	    1	    2	0
36	   23	1100001100010101	1100	    0	    4	    1	    2	0
Time                   38 JUMP ( 21)R[3]
Decoding at Time                   38; PC=   23: 
38	   24	1100000000011000	1100	    0	    4	    1	    2	0
Time                   40 JUMP  24
Decoding at Time                   40; PC=   24: 
40	   25	0101011011000000	1100	    0	    4	    1	    2	0
41	   25	0101011011000000	0101	    0	    4	    1	    2	0
43	   25	0101011011000000	0101	    0	   -1	    1	    2	0
Time                   44 SUB R[1], R[2], R[3]
Decoding at Time                   44; PC=   25: 
44	   26	1100000001110001	0101	    0	   -1	    1	    2	0
45	   26	1100000001110001	1100	    0	   -1	    1	    2	0
46	   10	1100000001110001	1100	    0	   -1	    1	    2	0
Time                   47 RJUMP -15
Decoding at Time                   47; PC=   10: 
47	   11	0001110000000010	1100	    0	   -1	    1	    2	0
48	   11	0001110000000010	0001	    0	   -1	    1	    2	0
49	   11	0001110000000010	0001	    0	   -1	    1	    2	0
Time                   50 LOADI R[3],   2
Decoding at Time                   50; PC=   11: 
50	   12	0000101100000010	0001	    0	   -1	    1	    2	0
51	   12	0000101100000010	0000	    0	   -1	    1	    2	0
54	   12	0000101100000010	0000	    0	   -1	    1	    2	0
Time                   55 LOAD R[2], (  2)R[3]
Decoding at Time                   55; PC=   12: 
55	   13	0000010000000011	0000	    0	   -1	    1	    2	0
58	   13	0000010000000011	0000	    0	    2	    1	    2	0
Time                   59 LOAD R[1],   3
Decoding at Time                   59; PC=   13: 
59	   14	1110000110000010	0000	    0	    2	    1	    2	0
60	   14	1110000110000010	1110	    0	    2	    1	    2	0
61	   15	1110000110000010	1110	    0	    2	    1	    2	0
Time                   62 BNE R[1], R[2],   2
Decoding at Time                   62; PC=   15: 
62	   16	0010010000000101	1110	    0	    2	    1	    2	0
63	   16	0010010000000101	0010	    0	    2	    1	    2	0
Time                   65 STORE R[1],   5
Decoding at Time                   65; PC=   16: 
65	   17	0100010010000000	0010	    0	    2	    1	    2	0
66	   17	0100010010000000	0100	    0	    2	    1	    2	0
68	   17	0100010010000000	0100	    0	    1	    1	    2	0
Time                   69 ADD R[1], R[0], R[2]
Decoding at Time                   69; PC=   17: 
69	   18	1101000110000010	0100	    0	    1	    1	    2	0
70	   18	1101000110000010	1101	    0	    1	    1	    2	0
71	   19	1101000110000010	1101	    0	    1	    1	    2	0
Time                   72 BEQ R[1], R[2],   2
Decoding at Time                   72; PC=   19: 
72	   20	0010011100000110	1101	    0	    1	    1	    2	0
73	   20	0010011100000110	0010	    0	    1	    1	    2	0
Time                   76 STORE R[1], (  6)R[3]
Decoding at Time                   76; PC=   20: 
76	   21	0001010000000100	0010	    0	    1	    1	    2	0
77	   21	0001010000000100	0001	    0	    1	    1	    2	0
78	   21	0001010000000100	0001	    0	    4	    1	    2	0
Time                   79 LOADI R[1],   4
Decoding at Time                   79; PC=   21: 
79	   22	1111001001000001	0001	    0	    4	    1	    2	0
80	   22	1111001001000001	1111	    0	    4	    1	    2	0
Time                   82 BLT R[2], R[1],   1
Decoding at Time                   82; PC=   22: 
82	   23	1100001100010101	1111	    0	    4	    1	    2	0
83	   23	1100001100010101	1100	    0	    4	    1	    2	0
Time                   85 JUMP ( 21)R[3]
Decoding at Time                   85; PC=   23: 
85	   24	1100000000011000	1100	    0	    4	    1	    2	0
Time                   87 JUMP  24
Decoding at Time                   87; PC=   24: 
87	   25	0101011011000000	1100	    0	    4	    1	    2	0
88	   25	0101011011000000	0101	    0	    4	    1	    2	0
90	   25	0101011011000000	0101	    0	   -1	    1	    2	0
Time                   91 SUB R[1], R[2], R[3]
Decoding at Time                   91; PC=   25: 
91	   26	1100000001110001	0101	    0	   -1	    1	    2	0
92	   26	1100000001110001	1100	    0	   -1	    1	    2	0
93	   10	1100000001110001	1100	    0	   -1	    1	    2	0
Time                   94 RJUMP -15
Decoding at Time                   94; PC=   10: 
94	   11	0001110000000010	1100	    0	   -1	    1	    2	0
95	   11	0001110000000010	0001	    0	   -1	    1	    2	0
96	   11	0001110000000010	0001	    0	   -1	    1	    2	0
Time                   97 LOADI R[3],   2
Decoding at Time                   97; PC=   11: 
97	   12	0000101100000010	0001	    0	   -1	    1	    2	0
98	   12	0000101100000010	0000	    0	   -1	    1	    2	0
101	   12	0000101100000010	0000	    0	   -1	    1	    2	0
Time                  102 LOAD R[2], (  2)R[3]
Decoding at Time                  102; PC=   12: 
102	   13	0000010000000011	0000	    0	   -1	    1	    2	0
105	   13	0000010000000011	0000	    0	    2	    1	    2	0
Time                  106 LOAD R[1],   3
Decoding at Time                  106; PC=   13: 
106	   14	1110000110000010	0000	    0	    2	    1	    2	0
107	   14	1110000110000010	1110	    0	    2	    1	    2	0
108	   15	1110000110000010	1110	    0	    2	    1	    2	0
Time                  109 BNE R[1], R[2],   2
Decoding at Time                  109; PC=   15: 
109	   16	0010010000000101	1110	    0	    2	    1	    2	0
110	   16	0010010000000101	0010	    0	    2	    1	    2	0
Time                  112 STORE R[1],   5
Decoding at Time                  112; PC=   16: 
112	   17	0100010010000000	0010	    0	    2	    1	    2	0
113	   17	0100010010000000	0100	    0	    2	    1	    2	0
115	   17	0100010010000000	0100	    0	    1	    1	    2	0
Time                  116 ADD R[1], R[0], R[2]
Decoding at Time                  116; PC=   17: 
116	   18	1101000110000010	0100	    0	    1	    1	    2	0
117	   18	1101000110000010	1101	    0	    1	    1	    2	0
118	   19	1101000110000010	1101	    0	    1	    1	    2	0
Time                  119 BEQ R[1], R[2],   2
Decoding at Time                  119; PC=   19: 
119	   20	0010011100000110	1101	    0	    1	    1	    2	0
120	   20	0010011100000110	0010	    0	    1	    1	    2	0
